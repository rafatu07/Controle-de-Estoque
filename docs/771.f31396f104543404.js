"use strict";(self.webpackChunkstock_control=self.webpackChunkstock_control||[]).push([[771],{5771:(L,h,n)=>{n.r(h),n.d(h,{ProductsModule:()=>j});var v=n(6895),g=n(433),Z=n(529),f=n(8250),P=n(4247),u=n(5593),l=n(4684),x=n(3520),y=n(7913),E=n(3054),M=n(1740),b=n(7188),p=n(5849),D=n(4028),T=n(2137),A=n(3608),a=n(805),S=n(4466),w=n(7579),m=n(2722),U=n(546),t=n(8256),O=n(6423),F=n(8655),J=n(52),C=n(2399);let B=(()=>{class o{transform(e,r){return null!==e?e.length>r?e.substring(0,r)+"...":e:""}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=t.Yjl({name:"shorten",type:o,pure:!0}),o})();function H(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"th",7)(2,"div",8)(3,"div",8),t._uU(4," Nome "),t.qZA(),t.TgZ(5,"div",8),t._UZ(6,"p-sortIcon",9)(7,"p-columnFilter",10),t.qZA()()(),t.TgZ(8,"th",11)(9,"div",8)(10,"div",8),t._uU(11," Quantidade "),t.qZA(),t.TgZ(12,"div",8),t._UZ(13,"p-sortIcon",12)(14,"p-columnFilter",13),t.qZA()()(),t.TgZ(15,"th",14)(16,"div",8)(17,"div",8),t._uU(18," Pre\xe7o "),t.qZA(),t.TgZ(19,"div",8),t._UZ(20,"p-sortIcon",15)(21,"p-columnFilter",16),t.qZA()()(),t.TgZ(22,"th",17)(23,"div",8)(24,"div",8),t._uU(25," Descri\xe7\xe3o "),t.qZA(),t.TgZ(26,"div",8),t._UZ(27,"p-sortIcon",18)(28,"p-columnFilter",19),t.qZA()()(),t.TgZ(29,"th",20)(30,"div",8)(31,"div",8),t._uU(32," Categoria "),t.qZA(),t.TgZ(33,"div",8),t._UZ(34,"p-sortIcon",21)(35,"p-columnFilter",22),t.qZA()()(),t.TgZ(36,"th")(37,"div",23)(38,"p-button",24),t.NdJ("onClick",function(){t.CHM(e);const d=t.oxw();return t.KtG(d.handleProductEvent(d.addProductEvent))}),t.qZA()()()()}2&o&&(t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1),t.xp6(7),t.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1))}function R(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.ALo(7,"currency"),t.qZA(),t.TgZ(8,"td",25),t._uU(9),t.ALo(10,"shorten"),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td")(14,"div",26)(15,"button",27),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.handleProductEvent(c.editProductEvent,null==s?null:s.id))}),t.qZA(),t.TgZ(16,"button",28),t.NdJ("click",function(){const s=t.CHM(e).$implicit,c=t.oxw();return t.KtG(c.handleDeleteProduct(null==s?null:s.id,null==s?null:s.name))}),t.qZA()()()()}if(2&o){const e=i.$implicit;t.xp6(2),t.Oqu(null==e?null:e.name),t.xp6(2),t.Oqu(null==e?null:e.amount),t.xp6(2),t.Oqu(t.xi3(7,6,null==e?null:e.price,"BRL")),t.xp6(2),t.Q6J("pTooltip",null==e?null:e.description),t.xp6(1),t.hij(" ",t.xi3(10,9,null==e?null:e.description,25)," "),t.xp6(3),t.Oqu(null==e||null==e.category?null:e.category.name)}}const I=function(){return["name","amount"]},$=function(){return{"min-width":"75rem"}};let N=(()=>{class o{constructor(){this.products=[],this.productEvent=new t.vpe,this.deleteProductEvent=new t.vpe,this.addProductEvent=C.h.ADD_PRODUCT_EVENT,this.editProductEvent=C.h.EDIT_PRODUCT_EVENT}handleProductEvent(e,r){e&&""!==e&&this.productEvent.emit(r&&""!==r?{action:e,id:r}:{action:e})}handleDeleteProduct(e,r){""!==e&&""!==r&&this.deleteProductEvent.emit({product_id:e,productName:r})}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-products-table"]],inputs:{products:"products"},outputs:{productEvent:"productEvent",deleteProductEvent:"deleteProductEvent"},decls:7,vars:11,consts:[[1,"grid"],[1,"col-12"],["styleClass","shadow-3 m-5 text-indigo-800","header","Produtos em estoque"],["dataKey","id","currentPageReportTemplate","Mostrando {first} de {last} de {totalRecords} produtos",3,"value","rows","paginator","responsive","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","selectionChange"],["productsTable",""],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","name"],[1,"flex","justify-content-between","align-items-center"],["field","name"],["type","text","field","name","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","amount"],["field","amount"],["type","text","field","amount","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","price"],["field","price"],["type","text","field","price","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","description"],["field","description"],["type","text","field","description","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],["pSortableColumn","category.name"],["field","category.name"],["type","text","field","category.name","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],[1,"flex","justify-content-center"],["styleClass","p-button-info","icon","pi pi-plus","label","Adicionar","pTooltip","Adicionar produto","tooltipPosition","top",3,"onClick"],["tooltipPosition","top",3,"pTooltip"],[1,"flex","justify-content-center","gap-3","align-content-center","align-items-center"],["pButton","","pRipple","","icon","pi pi-pencil","pTooltip","Editar produto","tooltipPosition","top",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","icon","pi pi-trash","pTooltip","Remover Produto","tooltipPosition","top",1,"p-button-rounded","p-button-danger",3,"click"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"p-card",2)(3,"p-table",3,4),t.NdJ("selectionChange",function(s){return r.productSelected=s}),t.YNc(5,H,39,15,"ng-template",5),t.YNc(6,R,17,12,"ng-template",6),t.qZA()()()()),2&e&&(t.xp6(3),t.Q6J("value",r.products)("rows",10)("paginator",!0)("responsive",!0)("globalFilterFields",t.DdM(9,I))("tableStyle",t.DdM(10,$))("selection",r.productSelected)("rowHover",!0)("showCurrentPageReport",!0))},dependencies:[P.Z,a.jx,u.Hq,u.zx,l.iA,l.lQ,l.fz,l.xl,A.u,v.H9,B],encapsulation:2}),o})();const Q=function(){return{width:"50vw"}},Y=[{path:"",component:(()=>{class o{constructor(e,r,d,s,c,z){this.productsService=e,this.productsDtService=r,this.router=d,this.messageService=s,this.confirmationService=c,this.dialogService=z,this.destroy$=new w.x,this.productsDatas=[]}ngOnInit(){this.getServiceProductsDatas()}getServiceProductsDatas(){const e=this.productsDtService.getProductsDatas();e.length>0?this.productsDatas=e:this.getAPIProductsDatas()}getAPIProductsDatas(){this.productsService.getAllProducts().pipe((0,m.R)(this.destroy$)).subscribe({next:e=>{e.length>0&&(this.productsDatas=e)},error:e=>{console.log(e),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao buscar produtos",life:2500}),this.router.navigate(["/dashboard"])}})}handleProductAction(e){e&&(this.ref=this.dialogService.open(U.d,{header:e?.action,width:"70%",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0,data:{event:e,productDatas:this.productsDatas}}),this.ref.onClose.pipe((0,m.R)(this.destroy$)).subscribe({next:()=>this.getAPIProductsDatas()}))}handleDeleteProductAction(e){e&&this.confirmationService.confirm({message:`Confirma a exclus\xe3o do produto: ${e?.productName}?`,header:"Confirma\xe7\xe3o de exclus\xe3o",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"N\xe3o",accept:()=>this.deleteProduct(e?.product_id)})}deleteProduct(e){e&&this.productsService.deleteProduct(e).pipe((0,m.R)(this.destroy$)).subscribe({next:r=>{r&&(this.messageService.add({severity:"success",summary:"Sucesso",detail:"Produto removido com sucesso!",life:2500}),this.getAPIProductsDatas())},error:r=>{console.log(r),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao remover produto!",life:2500})}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(O.s),t.Y36(F.H),t.Y36(f.F0),t.Y36(a.ez),t.Y36(a.YP),t.Y36(p.xA))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-products-home"]],decls:3,vars:4,consts:[[3,"products","productEvent","deleteProductEvent"]],template:function(e,r){1&e&&(t._UZ(0,"app-toolbar-navigation"),t.TgZ(1,"app-products-table",0),t.NdJ("productEvent",function(s){return r.handleProductAction(s)})("deleteProductEvent",function(s){return r.handleDeleteProductAction(s)}),t.qZA(),t._UZ(2,"p-confirmDialog")),2&e&&(t.xp6(1),t.Q6J("products",r.productsDatas),t.xp6(1),t.Akn(t.DdM(3,Q)))},dependencies:[J.p,T.Q,N],encapsulation:2}),o})()}];let j=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[p.xA,a.YP],imports:[v.ez,g.u5,g.UX,f.Bz.forChild(Y),S.m,Z.JF,P.d,u.hJ,l.U$,x.zz,y.Iu,M.j,E.A,b.L$,p.DL,D.kW,T.D,A.z]}),o})()}}]);