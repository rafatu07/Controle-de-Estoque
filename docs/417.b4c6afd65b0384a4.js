"use strict";(self.webpackChunkstock_control=self.webpackChunkstock_control||[]).push([[417],{1417:(U,h,i)=>{i.r(h),i.d(h,{CategoriesModule:()=>z});var x=i(6895),c=i(433),y=i(8250),S=i(529),v=i(4247),u=i(5593),d=i(4684),F=i(3520),Z=i(7913),f=i(1740),D=i(3054),N=i(7188),C=i(5849),O=i(4028),A=i(2137),T=i(3608),m=i(805),b=i(7579),p=i(2722),l=(()=>{return(o=l||(l={})).ADD_CATEGORY_ACTION="Adicionar Categoria",o.EDIT_CATEGORY_ACTION="Editar Categoria",l;var o})(),e=i(8256),E=i(3634);let R=(()=>{class o{constructor(t,r,n,a){this.ref=t,this.formBuilder=r,this.messageService=n,this.categoriesService=a,this.destroy$=new b.x,this.addCategoryAction=l.ADD_CATEGORY_ACTION,this.editCategoryAction=l.EDIT_CATEGORY_ACTION,this.categoryForm=this.formBuilder.group({name:["",c.kI.required]})}ngOnInit(){this.categoryAction=this.ref.data,this.categoryAction?.event?.action===this.editCategoryAction&&null!==this.categoryAction?.event?.categoryName&&this.setCategoryName(this.categoryAction?.event?.categoryName)}handleSubmitCategoryAction(){this.categoryAction?.event?.action===this.addCategoryAction?this.handleSubmitAddCategory():this.categoryAction?.event?.action===this.editCategoryAction&&this.handleSubmitEditCategory()}handleSubmitAddCategory(){this.categoryForm?.value&&this.categoryForm?.valid&&this.categoriesService.createNewCategory({name:this.categoryForm.value.name}).pipe((0,p.R)(this.destroy$)).subscribe({next:r=>{r&&(this.categoryForm.reset(),this.messageService.add({severity:"success",summary:"Sucesso",detail:"Categoria criada com sucesso!",life:3e3}))},error:r=>{console.log(r),this.categoryForm.reset(),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao criar categoria!",life:3e3})}})}handleSubmitEditCategory(){this.categoryForm?.value&&this.categoryForm?.valid&&this.categoryAction?.event?.id&&this.categoriesService.editCategoryName({name:this.categoryForm?.value?.name,category_id:this.categoryAction?.event?.id}).pipe((0,p.R)(this.destroy$)).subscribe({next:()=>{this.categoryForm.reset(),this.messageService.add({severity:"success",summary:"Sucesso",detail:"Categoria editada com sucesso!",life:3e3})},error:r=>{console.log(r),this.categoryForm.reset(),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao editar categoria!",life:3e3})}})}setCategoryName(t){t&&this.categoryForm.setValue({name:t})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.S),e.Y36(c.qu),e.Y36(m.ez),e.Y36(E.G))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-category-form"]],decls:6,vars:2,consts:[[3,"formGroup","ngSubmit"],[1,"card","flex","flex-column","md:flex-column","gap-3"],["pInputText","","placeholder","Nome","formControlName","name"],[1,"flex","flex-row","justify-content-center","align-content-center","align-items-center"],["type","submit","label","Concluir",3,"disabled"]],template:function(t,r){1&t&&(e.TgZ(0,"div")(1,"form",0),e.NdJ("ngSubmit",function(){return r.handleSubmitCategoryAction()}),e.TgZ(2,"div",1),e._UZ(3,"input",2),e.TgZ(4,"div",3),e._UZ(5,"p-button",4),e.qZA()()()()),2&t&&(e.xp6(1),e.Q6J("formGroup",r.categoryForm),e.xp6(4),e.Q6J("disabled",!r.categoryForm.valid))},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.sg,c.u,u.zx,f.o],encapsulation:2}),o})();var Y=i(52);function I(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"th",6)(2,"div",7)(3,"div",7),e._uU(4," Nome "),e.qZA(),e.TgZ(5,"div",7),e._UZ(6,"p-sortIcon",8)(7,"p-columnFilter",9),e.qZA()()(),e.TgZ(8,"th")(9,"div",10)(10,"p-button",11),e.NdJ("onClick",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.handleCategoryEvent(n.addCategoryAction))}),e.qZA()()()()}2&o&&(e.xp6(7),e.Q6J("showMatchModes",!1)("showOperator",!1)("showAddButton",!1))}function J(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td")(4,"div",12)(5,"button",13),e.NdJ("click",function(){const a=e.CHM(t).$implicit,g=e.oxw();return e.KtG(g.handleCategoryEvent(g.editCategoryAction,null==a?null:a.id,null==a?null:a.name))}),e.qZA(),e.TgZ(6,"button",14),e.NdJ("click",function(){const a=e.CHM(t).$implicit,g=e.oxw();return e.KtG(g.handleDeleteCategoryEvent(null==a?null:a.id,null==a?null:a.name))}),e.qZA()()()()}if(2&o){const t=s.$implicit;e.xp6(2),e.Oqu(null==t?null:t.name)}}const $=function(){return{"min-width":"75rem"}},M=function(){return{width:"50vw"}};let G=(()=>{class o{constructor(){this.categories=[],this.categoryEvent=new e.vpe,this.deleteCategoryEvent=new e.vpe,this.addCategoryAction=l.ADD_CATEGORY_ACTION,this.editCategoryAction=l.EDIT_CATEGORY_ACTION}handleDeleteCategoryEvent(t,r){""!==t&&""!==r&&this.deleteCategoryEvent.emit({category_id:t,categoryName:r})}handleCategoryEvent(t,r,n){t&&""!==t&&this.categoryEvent.emit({action:t,id:r,categoryName:n})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-categories-table"]],inputs:{categories:"categories"},outputs:{categoryEvent:"categoryEvent",deleteCategoryEvent:"deleteCategoryEvent"},decls:7,vars:12,consts:[[1,"grid"],[1,"col-12"],["styleClass","shadow-3 m-5 text-indigo-800","header","Categorias de produtos"],["dataKey","id","currentPageReportTemplate","Mostrando {first} de {last} de {totalRecords} produtos",3,"value","selection","rows","paginator","responsive","tableStyle","rowHover","showCurrentPageReport","selectionChange"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","name"],[1,"flex","justify-content-between","align-items-center"],["field","name"],["type","text","field","name","display","menu","matchMode","contains",3,"showMatchModes","showOperator","showAddButton"],[1,"flex","justify-content-center"],["styleClass","p-button-info","icon","pi pi-plus","label","Adicionar","pTooltip","Adicionar Categoria","tooltipPosition","top",3,"onClick"],[1,"flex","justify-content-center","gap-3","align-content-center","align-items-center"],["pButton","","pRipple","","icon","pi pi-pencil","pTooltip","Editar Categoria","tooltipPosition","top",1,"p-button-rounded","p-button-warning",3,"click"],["pButton","","pRipple","","icon","pi pi-trash","pTooltip","Remover Categoria","tooltipPosition","top",1,"p-button-rounded","p-button-danger",3,"click"]],template:function(t,r){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"p-card",2)(3,"p-table",3),e.NdJ("selectionChange",function(a){return r.categorySelected=a}),e.YNc(4,I,11,3,"ng-template",4),e.YNc(5,J,7,1,"ng-template",5),e.qZA()()(),e._UZ(6,"p-confirmDialog"),e.qZA()),2&t&&(e.xp6(3),e.Q6J("value",r.categories)("selection",r.categorySelected)("rows",10)("paginator",!0)("responsive",!0)("tableStyle",e.DdM(10,$))("rowHover",!0)("showCurrentPageReport",!0),e.xp6(3),e.Akn(e.DdM(11,M)))},dependencies:[v.Z,m.jx,u.Hq,u.zx,d.iA,d.lQ,d.fz,d.xl,A.Q,T.u],encapsulation:2}),o})();const w=[{path:"",component:(()=>{class o{constructor(t,r,n,a,g){this.categoriesService=t,this.dialogService=r,this.messageService=n,this.confirmationService=a,this.router=g,this.destroy$=new b.x,this.categoriesDatas=[]}ngOnInit(){this.getAllCategories()}getAllCategories(){this.categoriesService.getAllCategories().pipe((0,p.R)(this.destroy$)).subscribe({next:t=>{t.length>0&&(this.categoriesDatas=t)},error:t=>{console.log(t),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao buscar categorias!",life:3e3}),this.router.navigate(["/dashboard"])}})}handleDeleteCategoryAction(t){t&&this.confirmationService.confirm({message:`Confirma a exclus\xe3o da categoria: ${t?.categoryName}`,header:"Confirma\xe7\xe3o de exclus\xe3o",icon:"pi pi-exclamation-triangle",acceptLabel:"Sim",rejectLabel:"N\xe3o",accept:()=>this.deleteCategory(t?.category_id)})}deleteCategory(t){t&&(this.categoriesService.deleteCategory({category_id:t}).pipe((0,p.R)(this.destroy$)).subscribe({next:r=>{this.getAllCategories(),this.messageService.add({severity:"success",summary:"Sucesso",detail:"Categoria removida com sucesso!",life:3e3})},error:r=>{console.log(r),this.getAllCategories(),this.messageService.add({severity:"error",summary:"Erro",detail:"Erro ao remover categoria!",life:3e3})}}),this.getAllCategories())}handleCategoryAction(t){t&&(this.ref=this.dialogService.open(R,{header:t?.action,width:"70%",contentStyle:{overflow:"auto"},baseZIndex:1e4,maximizable:!0,data:{event:t}}),this.ref.onClose.pipe((0,p.R)(this.destroy$)).subscribe({next:()=>this.getAllCategories()}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(E.G),e.Y36(C.xA),e.Y36(m.ez),e.Y36(m.YP),e.Y36(y.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-categories-home"]],decls:2,vars:1,consts:[[3,"categories","deleteCategoryEvent","categoryEvent"]],template:function(t,r){1&t&&(e._UZ(0,"app-toolbar-navigation"),e.TgZ(1,"app-categories-table",0),e.NdJ("deleteCategoryEvent",function(a){return r.handleDeleteCategoryAction(a)})("categoryEvent",function(a){return r.handleCategoryAction(a)}),e.qZA()),2&t&&(e.xp6(1),e.Q6J("categories",r.categoriesDatas))},dependencies:[Y.p,G],encapsulation:2}),o})()}];var H=i(4466);let z=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({providers:[C.xA,m.YP],imports:[x.ez,c.u5,c.UX,y.Bz.forChild(w),H.m,S.JF,v.d,u.hJ,d.U$,F.zz,Z.Iu,f.j,D.A,N.L$,C.DL,O.kW,A.D,T.z]}),o})()}}]);